<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enkel Test - Nya Layouten</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <h1>Test av nya layouten</h1>
        
        <div id="company-info" style="display: block;">
            <div id="company-details">
                <!-- Test data will be inserted here -->
            </div>
        </div>
    </div>

    <script>
        // Helper function to replace N/A with Saknas
        const formatValue = (value) => {
            if (!value || value === 'N/A' || value === 'null' || value === 'undefined') {
                return 'Saknas';
            }
            return value;
        };

        // Test data
        const testCompanyData = {
            namn: "Test F√∂retag AB",
            organisationsnummer: "556123-4567",
            form: "AB - Privat svenskt utan koncern",
            status: "Aktiv",
            email: "test@foretag.se",
            telefon: "070-123 45 67",
            adress: {
                fullAddress: "Testgatan 1, 123 45 Stockholm"
            },
            verksamhet: "Testverksamhet f√∂r att verifiera nya layouten",
            omsattning: "2024 : < 1 tkr",
            befattningshavare: "STYRELSELEDAMOT Test Person",
            verkligHuvudman: "Saknas",
            firmateckning: "Firman tecknas av styrelsen",
            sniKoder: [
                {
                    kod: "46770",
                    klartext: "Skrothandel"
                }
            ]
        };

        // Function to initialize tabs
        function initTabs() {
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabPanes = document.querySelectorAll('.tab-pane');
            
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const targetTab = button.getAttribute('data-tab');
                    
                    // Remove active class from all buttons and panes
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    tabPanes.forEach(pane => pane.classList.remove('active'));
                    
                    // Add active class to clicked button and corresponding pane
                    button.classList.add('active');
                    document.getElementById(targetTab).classList.add('active');
                });
            });
        }

        // Function to display company info (copied from app.js)
        function displayCompanyInfo(companyData) {
            console.log('üé® Displaying company info with data:', companyData);
            
            const companyDetails = document.getElementById('company-details');
            const companyHeader = document.querySelector('.company-header h2');
            
            if (!companyDetails) {
                console.error('‚ùå Company details element not found');
                return;
            }

            // Update the main card header with company name
            if (companyHeader) {
                companyHeader.textContent = formatValue(companyData.namn);
            }

            // Create HTML for tabbed company information
            const html = `
                <div class="company-info-clean">
                    <!-- Company Header -->
                    <div class="company-header-section">
                        <div class="company-header-left">
                            <i class="fas fa-eye company-icon"></i>
                            <div class="company-title">
                                <h3 class="company-name">${formatValue(companyData.namn)}</h3>
                                <div class="company-meta">
                                    <span class="org-number">${formatValue(companyData.organisationsnummer)}</span>
                                    <span class="company-form-tag">${formatValue(companyData.form)}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Tab Navigation -->
                    <div class="company-tabs">
                        <button class="tab-button active" data-tab="foretagsuppgifter">
                            <i class="fas fa-building"></i>
                            F√∂retagsuppgifter
                        </button>
                        <button class="tab-button" data-tab="riskbedomning">
                            <i class="fas fa-shield-alt"></i>
                            Riskbed√∂mning
                        </button>
                        <button class="tab-button" data-tab="kundens-tjanster">
                            <i class="fas fa-cogs"></i>
                            Kundens tj√§nster
                        </button>
                    </div>
                    
                    <!-- Tab Content -->
                    <div class="tab-content">
                        <!-- Tab 1: Company Information -->
                        <div class="tab-pane active" id="foretagsuppgifter">
                            <!-- Contact Information Section -->
                            <div class="contact-info-section">
                                <div class="contact-grid">
                                    <div class="contact-item">
                                        <label>E-post</label>
                                        <span>${formatValue(companyData.email || 'Saknas')}</span>
                                    </div>
                                    <div class="contact-item">
                                        <label>Postadress</label>
                                        <span>${formatValue(companyData.adress?.fullAddress || 'Saknas')}</span>
                                    </div>
                                    <div class="contact-item">
                                        <label>Telefonnr</label>
                                        <span>${formatValue(companyData.telefon || 'Saknas')}</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Detailed Information Section -->
                            <div class="detailed-info-section">
                                <div class="info-grid">
                                    <div class="info-item">
                                        <label>SNI kod</label>
                                        <span>
                                            ${companyData.sniKoder && companyData.sniKoder.length > 0 ? 
                                                companyData.sniKoder
                                                    .filter(sni => sni.klartext && sni.klartext.trim() !== '')
                                                    .map(sni => `<span class="sni-code">${formatValue(sni.kod)}</span> <span class="sni-text">${sni.klartext}</span>`).join('<br>')
                                                : 'Saknas'
                                            }
                                        </span>
                                    </div>
                                    <div class="info-item">
                                        <label>Verksamhetsbeskrivning</label>
                                        <span>${formatValue(companyData.verksamhet || 'Saknas')}</span>
                                    </div>
                                    <div class="info-item">
                                        <label>Oms√§ttning</label>
                                        <span>${formatValue(companyData.omsattning || 'Saknas')}</span>
                                    </div>
                                    <div class="info-item">
                                        <label>Befattningshavare</label>
                                        <span>${formatValue(companyData.befattningshavare || 'Saknas')}</span>
                                    </div>
                                    <div class="info-item">
                                        <label>Verklig huvudman</label>
                                        <span>${formatValue(companyData.verkligHuvudman || 'Saknas')}</span>
                                    </div>
                                    <div class="info-item">
                                        <label>Firmateckning</label>
                                        <span>${formatValue(companyData.firmateckning || 'Saknas')}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Tab 2: Riskbed√∂mning -->
                        <div class="tab-pane" id="riskbedomning">
                            <div class="tab-placeholder">
                                <div class="placeholder-icon">
                                    <i class="fas fa-shield-alt"></i>
                                </div>
                                <h4>Riskbed√∂mning</h4>
                                <p>H√§r kommer riskbed√∂mningsdata att visas n√§r den √§r tillg√§nglig.</p>
                                <small>Funktionalitet under utveckling</small>
                            </div>
                        </div>
                        
                        <!-- Tab 3: Kundens tj√§nster -->
                        <div class="tab-pane" id="kundens-tjanster">
                            <div class="tab-placeholder">
                                <div class="placeholder-icon">
                                    <i class="fas fa-cogs"></i>
                                </div>
                                <h4>Kundens tj√§nster</h4>
                                <p>H√§r kommer information om kundens tj√§nster att visas n√§r den √§r tillg√§nglig.</p>
                                <small>Funktionalitet under utveckling</small>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            console.log('üìù Generated HTML:', html);
            companyDetails.innerHTML = html;
            
            // Initialize tab functionality
            initTabs();
        }

        // Test the new layout when page loads
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üöÄ Page loaded, testing new layout...');
            displayCompanyInfo(testCompanyData);
        });
    </script>
</body>
</html>
